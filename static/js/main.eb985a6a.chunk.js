(this["webpackJsonpstock-dashboard"]=this["webpackJsonpstock-dashboard"]||[]).push([[0],{52:function(e,t,n){e.exports=n(99)},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},95:function(e,t){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44),o=n.n(c),u=(n(57),n(58),n(10)),i=(n(59),function(e){var t=e.route,n=e.name;return r.a.createElement(u.b,{to:t,className:"tab",activeStyle:{fontWeight:"bold",backgroundColor:"#797979"}},n)}),l=function(e){var t=e.children,n=e.testId;return r.a.createElement("div",{className:"tab-panel","data-testid":n},r.a.createElement("div",{className:"tab-container"},r.a.Children.map(t,(function(e){var t=e.props;return e.type===i?r.a.createElement(i,t):null}))))},s=n(1),d=n(2),m=n(6),f=n.n(m),b=n(12),h=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=void 0===n?"http://kaboom.rksv.net":n,r=t.uri,c=t.options,e.next=3,fetch(a+r,c);case 3:if(!(o=e.sent).ok){e.next=6;break}return e.abrupt("return",o.json());case 6:return e.abrupt("return",new Error(o.statusText));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=n(9),v=n(46),E=n(48),j=n(50),O=n.n(j),k=function(e){var t=e.error,n=e.data,c=e.testId,o=e.dataId,u=Object(E.a)("@".concat(o),[]),i=Object(d.a)(u,2),l=i[0],s=i[1];if(Object(a.useEffect)((function(){n&&n.length>0&&s(n)}),[n,s]),t)return r.a.createElement("div",null,t);if(!l)return r.a.createElement("div",null,"Loading");var m=function(e){return e.map((function(e){var t=e.split(",").map((function(e){return Number(e)}));return[O()(t[0]).format("DD/MM/YYYY")].concat(Object(p.a)(t.slice(1,5)))}))}(l);return r.a.createElement("div",{className:"chart-container"},r.a.createElement(v.a,{width:"100%",height:400,chartType:"CandlestickChart",loader:r.a.createElement("div",null,"Loading Chart"),data:[["date","open","high","low","close"]].concat(Object(p.a)(m)),options:{legend:"none"},rootProps:{"data-testid":c}}))};k.defaultProps={testId:"stock-chart"};var g=k,w=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h({uri:"/api/historical"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(null),u=Object(d.a)(o,2),i=u[0],l=u[1],s=Object(a.useState)(null),m=Object(d.a)(s,2),h=m[0],p=m[1];return[{loading:r,data:h,error:i},Object(a.useCallback)(function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),l(null),t.prev=2,t.next=5,e(n);case 5:a=t.sent,p(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),l(t.t0);case 12:return t.prev=12,c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),[]),Object(a.useCallback)((function(){c(!1),l(null),p(null)}),[])]}(w),t=Object(d.a)(e,3),n=t[0],c=n.data,o=n.error,u=n.loading,i=t[1],l=t[2];return Object(a.useEffect)((function(){return i(),l}),[i,l]),r.a.createElement(g,{data:c,error:o,dataId:"home",loading:u})},y=n(51),C=n.n(y),I=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),o=Object(d.a)(c,2),u=o[0],i=o[1];return Object(a.useEffect)((function(){var e=C()("".concat("http://kaboom.rksv.net","/watch"));return e.on("connect",(function(){console.log("socket connected")})),e.on("disconnect",(function(){console.log("socket disconnected")})),e.emit("sub",{state:!0}),e.on("data",(function(e,t){r((function(t){return[].concat(Object(p.a)(t),[e])}));t(1)})),e.on("error",(function(e){console.log("error",e),i(e)})),function(){e.emit("unsub",{state:!1})}}),[]),[n,u]},N=function(){var e=I(),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.createElement(g,{data:n,error:a,dataId:"live"})},S=(n(98),function(){return r.a.createElement("div",{className:"flex column flex-1"},r.a.createElement(l,null,r.a.createElement(i,{name:"Home",route:"/dashboard/home"}),r.a.createElement(i,{name:"Live Chart",route:"/dashboard/live-chart"})),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/dashboard/home",component:x}),r.a.createElement(s.b,{path:"/dashboard/live-chart",component:N}),r.a.createElement(s.a,{to:"/dashboard/home"})))});var Y=function(){return r.a.createElement("main",{className:"app"},r.a.createElement(u.a,{basename:"/"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/dashboard",component:S}),r.a.createElement(s.a,{from:"/",to:"dashboard",exact:!0}),r.a.createElement(s.b,{path:"/*",render:function(){return r.a.createElement("div",null,"Broken route")}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.eb985a6a.chunk.js.map